{% extends "FrontOffice/User/edit._base.html.twig" %}

{% block title %}{{ user.lastname }} {{ user.firstname }} - {{ parent() }}{% endblock %}

{% block topbar_left %}
    <div data-kt-swapper="true" data-kt-swapper-mode="prepend" data-kt-swapper-parent="{default: '#kt_content_container', 'lg': '#kt_header_nav'}" class="page-title d-flex align-items-center flex-wrap me-3 mb-5 mb-lg-0">
        <h1 class="d-flex align-items-center text-dark fw-bolder fs-3 my-1">User management</h1>
        <span class="h-20px border-gray-200 border-start mx-4"></span>
        <ul class="breadcrumb breadcrumb-separatorless fw-bold fs-7 my-1">
            {{ breadcrumb(app.request, {'user.fullname': user.fullname}) }}
        </ul>
    </div>
{% endblock %}

{% block content %}
    <h1>Delete account</h1>
    <button class="btn btn-danger btn-sm" id="user_delete_btn" data-href="{{ path('frontoffice.users.delete', {'user': user, '_token': csrf_token('delete-' ~ user)}) }}">Delete account</button>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="application/javascript">
        var KTUsers = function(){
            return {
                init: function(){
                    document.getElementById('user_delete_btn').addEventListener("click", (function (t){
                        Swal.fire({
                            text: "Are you sure you want to delete this user?",
                            icon: "warning",
                            showCancelButton: !0,
                            buttonsStyling: !1,
                            confirmButtonText: "Yes, delete!",
                            cancelButtonText: "No, cancel",
                            customClass: {
                                confirmButton: "btn fw-bold btn-danger",
                                cancelButton: "btn fw-bold btn-active-light-primary"
                            }
                        }).then((function (t) {
                            t.value ? window.location.href = document.getElementById('user_delete_btn').dataset.href : "cancel" === t.dismiss && Swal.fire({
                                text: "user was not deleted.",
                                icon: "error",
                                buttonsStyling: !1,
                                confirmButtonText: "Ok, got it!",
                                customClass: {confirmButton: "btn fw-bold btn-primary"}
                            })
                        }))
                    }))
                }
            }
        }();
        KTUtil.onDOMContentLoaded((function () {
            KTUsers.init()
        }));
    </script>
{% endblock %}